/**
 * @file audio_application.c
 * @author
 * @date
 * @brief
 */

//=============================================================================
// [Inclusions] ===============================================================
#include "freertos/FreeRTOS.h"
#include "freertos/task.h"

#include "esp_log.h"

#include "dac_audio.h"
#include "audio_application.h"

//=============================================================================

//=============================================================================
// [Private Defines] ==========================================================

//=============================================================================

//=============================================================================
// [Local Typedef] ============================================================

//=============================================================================

//=============================================================================
// [External Data Definitions] ================================================

// Const ---------------------------------------------
//----------------------------------------------------

// Vars ----------------------------------------------
//----------------------------------------------------

// Task Handlers -------------------------------------
//----------------------------------------------------

// Queue Handlers ------------------------------------
//----------------------------------------------------

// Event Group Handlers ------------------------------
//----------------------------------------------------

// Semaphore Handlers --------------------------------
//----------------------------------------------------

//=============================================================================

//=============================================================================
// [Local Data Declarations] ==================================================

// Const ---------------------------------------------
//----------------------------------------------------

// Vars ----------------------------------------------
//----------------------------------------------------

// Task Handlers -------------------------------------
//----------------------------------------------------

// Queue Handlers ------------------------------------
//----------------------------------------------------

// Event Group Handlers ------------------------------
//----------------------------------------------------

// Semaphore Handlers --------------------------------
//----------------------------------------------------

//=============================================================================

//=============================================================================
// [Local Function Declarations] ==============================================

/**
 * @details
 * @param[in]
 * @param[in]
 * @return
 */
static void audio_app_process_task(void * pvParameters);

//=============================================================================

//=============================================================================
// [FreeRTOS Task Definitions] ================================================

static void audio_app_process_task(void * pvParameters)
{
    ESP_LOGI("AUDIO", "Empieza en 10...");

    vTaskDelay(pdMS_TO_TICKS(10000));


    while(1)
    {
        ESP_LOGI("AUDIO", "DAC_AUDIO_ALARMA");
        dac_audio_play(DAC_AUDIO_ALARMA);
        vTaskDelay(pdMS_TO_TICKS(10000));

        ESP_LOGI("AUDIO", "DAC_AUDIO_ALERT");
        dac_audio_play(DAC_AUDIO_ALERT);
        vTaskDelay(pdMS_TO_TICKS(10000));

        ESP_LOGI("AUDIO", "DAC_AUDIO_COUNTDOWN");
        dac_audio_play(DAC_AUDIO_COUNTDOWN);
        vTaskDelay(pdMS_TO_TICKS(15000));

        ESP_LOGI("AUDIO", "DAC_AUDIO_GAME1");
        dac_audio_play(DAC_AUDIO_GAME1);
        vTaskDelay(pdMS_TO_TICKS(10000));

        ESP_LOGI("AUDIO", "DAC_AUDIO_GAME2");
        dac_audio_play(DAC_AUDIO_GAME2);
        vTaskDelay(pdMS_TO_TICKS(10000));

        ESP_LOGI("AUDIO", "DAC_AUDIO_CONFIGURADO");
        dac_audio_play(DAC_AUDIO_CONFIGURADO);
        vTaskDelay(pdMS_TO_TICKS(10000));

        ESP_LOGI("AUDIO", "DAC_AUDIO_TELEFONO");
        dac_audio_play(DAC_AUDIO_TELEFONO);
        vTaskDelay(pdMS_TO_TICKS(10000));
    }
}
// End static void buzzer_process_task(void * pvParameters)

//=============================================================================

//=============================================================================
// [Local Function Definitions] ===============================================

//=============================================================================

//=============================================================================
// [External Function Definition] =============================================

void audio_app_init(void)
{
    xTaskCreate(audio_app_process_task, "audio_proc_ts", configMINIMAL_STACK_SIZE * 3, NULL, tskIDLE_PRIORITY + 2, NULL);
}
// End void audio_app_init(void)


//=============================================================================

//====================== [End Document] =======================================
